name: placemark-explorer

services:
  places-db:
    image: postgis/postgis:16-3.4
    environment:
      POSTGRES_DB: places
      POSTGRES_USER: places
      POSTGRES_PASSWORD: places
    ports:
      - "5432:5432"

  places-service:
    build:
      context: ../../services/places-service
      dockerfile: Dockerfile
    environment:
      SERVER_PORT: 8082
      DB_URL: jdbc:postgresql://places-db:5432/places
      DB_USERNAME: places
      DB_PASSWORD: places
    ports:
      - "8082:8082"
    depends_on:
      - places-db

  svc-core:
    build:
      context: ../../services/svc-core
      dockerfile: Dockerfile
    env_file:
      - ../../services/svc-core/.env.example
    ports:
      - "8080:8080"

  web:
    build:
      context: ../../frontend/web
      dockerfile: Dockerfile
    env_file:
      - ../../frontend/web/.env.example
    ports:
      - "3000:3000"
    depends_on:
      - svc-core
